# 【Android】多线程编程—线程基础

## 进程与线程

**进程**：

进程是操作系统分配资源的基本单位，它是程序执行的实例。每个进程拥有独立的内存空间、系统资源（如文件句柄、网络连接等），并且通常在不同的地址空间中执行。

进程之间相互独立，通常不能直接访问其他进程的内存。进程间的通信（IPC）通常需要特定机制，如管道、共享内存、消息队列等。

**线程**：

线程是进程内部的一个执行单元，是程序执行的最小单位。线程共享进程的内存空间和资源，因此线程间的通信比进程间通信更高效。

线程之间的同步和协调通常比较复杂，因为它们共享数据，容易出现竞态条件、死锁等问题。线程由操作系统调度，线程之间的创建和销毁比进程更为轻量和高效。

## 线程的状态

1. **New（新建状态）**：线程被创建，但尚未调用`start`方法。在线程开始运行之前，还需要做一些基础的准备工作。
2. **Runnable（可运行状态）**：一旦调用了`start`方法，线程就进入了可运行状态。处于这个状态的线程可能正在运行，也可能正在等待操作系统分配CPU时间。
3. **Blocked（阻塞状态）**：线程因为等待某个锁而被阻塞，此时它暂时不活动。
4. **Waiting（等待状态）**：线程暂时不活动，并且没有执行任何代码。这种状态消耗的资源最少，直到线程调度器重新激活它。
5. **Timed Waiting（超时等待状态）**：与等待状态类似，但这种状态会在指定的时间后自动返回到可运行状态。
6. **Terminated（终止状态）**：线程已经执行完毕。线程终止有两种情况：一是`run`方法执行完毕正常退出；二是由于一个未捕获的异常导致`run`方法终止，从而使线程进入终止状态。

线程状态转换过程如下：

> 线程创建后，调用`Thread`的`start`方法，线程进入可运行状态。
>
> 当线程执行`wait`方法后，进入等待状态，需要其他线程的通知才能返回到可运行状态。
>
> 超时等待状态是在等待状态上加上了时间限制，如果超过这个时间限制，线程会自动返回到可运行状态。
>
> 如果线程调用同步方法而没有获得锁，它会进入阻塞状态；一旦获得锁，线程会重新回到可运行状态。
>
> 当线程执行完毕或遇到未捕获的异常导致`run`方法终止时，线程会进入终止状态。



<img src="C:\Users\LittleBurger\AppData\Roaming\Typora\typora-user-images\image-20241202205155880.png" alt="image-20241202205155880" style="zoom:67%;" />
